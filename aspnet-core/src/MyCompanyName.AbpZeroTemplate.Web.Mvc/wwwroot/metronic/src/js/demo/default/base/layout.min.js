var mLayout=function(){var h,i,n,f,e,r,o,t,c=function(){var t,i=mUtil.get("m_header"),n={offset:{},minimize:{}};mUtil.attr(i,"m-minimize-mobile")=="hide"?(n.minimize.mobile={},n.minimize.mobile.on="m-header--hide",n.minimize.mobile.off="m-header--show"):n.minimize.mobile=!1;mUtil.attr(i,"m-minimize")=="hide"?(n.minimize.desktop={},n.minimize.desktop.on="m-header--hide",n.minimize.desktop.off="m-header--show"):n.minimize.desktop=!1;(t=mUtil.attr(i,"m-minimize-offset"))&&(n.offset.desktop=t);(t=mUtil.attr(i,"m-minimize-mobile-offset"))&&(n.offset.mobile=t);h=new mHeader("m_header",n)},l=function(){e=new mOffcanvas("m_header_menu",{overlay:!0,baseClass:"m-aside-header-menu-mobile",closeBy:"m_aside_header_menu_mobile_close_btn",toggleBy:{target:"m_aside_header_menu_mobile_toggle",state:"m-brand__toggler--active"}});i=new mMenu("m_header_menu",{submenu:{desktop:"dropdown",tablet:"accordion",mobile:"accordion"},accordion:{slideSpeed:200,expandAll:!1}})},a=function(){var t=mUtil.get("m_ver_menu"),r=mUtil.attr(t,"m-menu-dropdown")==="1"?"dropdown":"accordion",i;mUtil.attr(t,"m-menu-scrollable")==="1"&&(i={height:function(){if(mUtil.isInResponsiveRange("desktop"))return mUtil.getViewPort().height-parseInt(mUtil.css("m_header","height"))}});n=new mMenu("m_ver_menu",{scroll:i,submenu:{desktop:{"default":r,state:{body:"m-aside-left--minimize",mode:"dropdown"}},tablet:"accordion",mobile:"accordion"},accordion:{autoScroll:!1,expandAll:!1}})},v=function(){var t=mUtil.get("body"),u=mUtil.get("m_aside_left"),e=mUtil.hasClass(u,"m-aside-left--offcanvas-default")?"m-aside-left--offcanvas-default":"m-aside-left",i,r;f=new mOffcanvas("m_aside_left",{baseClass:e,overlay:!0,closeBy:"m_aside_left_close_btn",toggleBy:{target:"m_aside_left_offcanvas_toggle",state:"m-brand__toggler--active"}});mUtil.hasClass(t,"m-aside-left--fixed")&&(mUtil.addEvent(u,"mouseenter",function(){r&&(clearTimeout(r),r=null);i=setTimeout(function(){mUtil.hasClass(t,"m-aside-left--minimize")&&mUtil.isInResponsiveRange("desktop")&&(mUtil.removeClass(t,"m-aside-left--minimize"),mUtil.addClass(t,"m-aside-left--minimize-hover"),n.scrollerUpdate(),n.scrollerTop())},300)}),mUtil.addEvent(u,"mouseleave",function(){i&&(clearTimeout(i),i=null);r=setTimeout(function(){mUtil.hasClass(t,"m-aside-left--minimize-hover")&&mUtil.isInResponsiveRange("desktop")&&(mUtil.removeClass(t,"m-aside-left--minimize-hover"),mUtil.addClass(t,"m-aside-left--minimize"),n.scrollerUpdate(),n.scrollerTop())},500)}))},y=function(){if($("#m_aside_left_minimize_toggle").length!==0){r=new mToggle("m_aside_left_minimize_toggle",{target:"body",targetState:"m-brand--minimize m-aside-left--minimize",togglerState:"m-brand__toggler--active"});r.on("toggle",function(r){mUtil.get("main_portlet")&&t.updateSticky();i.pauseDropdownHover&&i.pauseDropdownHover(800);n.pauseDropdownHover(800);Cookies.set("sidebar_toggle_state",r.getState())});r.on("beforeToggle",function(){var n=mUtil.get("body");mUtil.hasClass(n,"m-aside-left--minimize")===!1&&mUtil.hasClass(n,"m-aside-left--minimize-hover")&&mUtil.removeClass(n,"m-aside-left--minimize-hover")})}},u=function(){if($("#m_aside_left_hide_toggle").length!==0){u=new mToggle("m_aside_left_hide_toggle",{target:"body",targetState:"m-aside-left--hide",togglerState:"m-brand__toggler--active"});u.on("toggle",function(t){i.pauseDropdownHover&&i.pauseDropdownHover(800);n.pauseDropdownHover&&n.pauseDropdownHover(800);Cookies.set("sidebar_hide_state",t.getState())})}},p=function(){$("#m_aside_header_topbar_mobile_toggle").click(function(){$("body").toggleClass("m-topbar--on")})},w=function(){if($("#m_quicksearch").length!==0){o=new mQuicksearch("m_quicksearch",{mode:mUtil.attr("m_quicksearch","m-quicksearch-mode"),minLength:1});o.on("search",function(n){n.showProgress();$.ajax({url:"inc/api/quick_search.php",data:{query:n.query},dataType:"html",success:function(t){n.hideProgress();n.showResult(t)},error:function(){n.hideProgress();n.showError("Connection error. Pleae try again later.")}})})}},b=function(){var n=new mScrollTop("m_scroll_top",{offset:300,speed:600})},s=function(){return new mPortlet("main_portlet",{sticky:{offset:parseInt(mUtil.css(mUtil.get("m_header"),"height")),zIndex:90,position:{top:function(){return parseInt(mUtil.css(mUtil.get("m_header"),"height"))},left:function(){var n=parseInt(mUtil.css(mUtil.getByClass("m-content"),"paddingLeft"));return mUtil.isInResponsiveRange("desktop")&&(n+=mUtil.hasClass(mUtil.get("body"),"m-aside-left--minimize")?78:255),n},right:function(){return parseInt(mUtil.css(mUtil.getByClass("m-content"),"paddingRight"))}}}})};return{init:function(){this.initHeader();this.initAside();this.initMainPortlet()},initMainPortlet:function(){mUtil.get("main_portlet")&&(t=s(),t.initSticky(),mUtil.addResizeHandler(function(){t.updateSticky()}))},resetMainPortlet:function(){t.destroySticky();t=s();t.initSticky()},initHeader:function(){c();l();p();w();b()},initAside:function(){v();a();y();u();this.onLeftSidebarToggle(function(){t&&t.updateSticky();var n=$(".m-datatable");n&&n.each(function(){$(this).mDatatable("redraw")})})},getAsideMenu:function(){return n},onLeftSidebarToggle:function(n){if(r)r.on("toggle",n)},closeMobileAsideMenuOffcanvas:function(){mUtil.isMobileDevice()&&f.hide()},closeMobileHorMenuOffcanvas:function(){mUtil.isMobileDevice()&&e.hide()}}}();$(document).ready(function(){mUtil.isAngularVersion()===!1&&mLayout.init()});